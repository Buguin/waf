# 配置误报屏蔽规则<a name="waf_01_0016"></a>

该任务指导用户通过Web应用防火墙服务配置误报屏蔽规则。

对于误报情况，可以添加白名单对误报进行忽略，对某些规则ID进行忽略设置（例如，某URL不进行XSS的检查，可设置屏蔽规则，屏蔽XSS检查）。

## 前提条件<a name="section2256777914731"></a>

-   已获取管理控制台的帐号和密码。
-   已添加防护域名。

## 操作步骤<a name="section6607803193933"></a>

1.  登录管理控制台（https://console.huaweicloud.com/）。
2.  单击管理控制台左上角的![](figures/选择区域图标.jpg)，选择区域或项目。
3.  单击页面上方的“服务列表“，选择“安全  \>  Web应用防火墙“，在左侧导航树中选择“域名配置“，进入“域名配置“页面，如[图1](#waf_01_0008_fig164792010154510)所示。

    **图 1**  域名配置页面<a name="waf_01_0008_fig164792010154510"></a>  
    ![](figures/域名配置页面-8.png "域名配置页面-8")

4.  在目标域名所在行的“防护策略“栏中，单击“配置防护策略“，进入“防护配置“页面。
5.  在“误报屏蔽“配置框中，设置“状态“为开启状态![](figures/开启图标-22.png)，单击“自定义误报屏蔽规则“，进入“误报屏蔽“规则配置页面，如[图2](#fig44151977327)所示。

    **图 2**  误报屏蔽配置框<a name="fig44151977327"></a>  
    ![](figures/误报屏蔽配置框.png "误报屏蔽配置框")

6.  在“误报屏蔽“规则配置页面左上角，单击“添加规则“，如[图3](#fig678219231364)所示。

    **图 3**  添加规则<a name="fig678219231364"></a>  
    ![](figures/添加规则-23.png "添加规则-23")

7.  添加误报屏蔽规则，如[图4](#fig14415389105236)所示，参数说明如[表1](#table4696626918715)所示。

    **图 4**  添加误报屏蔽规则<a name="fig14415389105236"></a>  
    ![](figures/添加误报屏蔽规则.png "添加误报屏蔽规则")

    **表 1**  添加误报屏蔽规则参数说明

    <a name="table4696626918715"></a>
    <table><thead align="left"><tr id="row151760118715"><th class="cellrowborder" valign="top" width="23.84%" id="mcps1.2.4.1.1"><p id="p3258956818715"><a name="p3258956818715"></a><a name="p3258956818715"></a>参数</p>
    </th>
    <th class="cellrowborder" valign="top" width="44.21%" id="mcps1.2.4.1.2"><p id="p2250934518715"><a name="p2250934518715"></a><a name="p2250934518715"></a>参数说明</p>
    </th>
    <th class="cellrowborder" valign="top" width="31.95%" id="mcps1.2.4.1.3"><p id="p2986065181135"><a name="p2986065181135"></a><a name="p2986065181135"></a>取值样例</p>
    </th>
    </tr>
    </thead>
    <tbody><tr id="row125751318715"><td class="cellrowborder" valign="top" width="23.84%" headers="mcps1.2.4.1.1 "><p id="p3474973518715"><a name="p3474973518715"></a><a name="p3474973518715"></a>路径</p>
    </td>
    <td class="cellrowborder" valign="top" width="44.21%" headers="mcps1.2.4.1.2 "><p id="p6326519018715"><a name="p6326519018715"></a><a name="p6326519018715"></a>误报路径，完整的URL链接，不包含域名。</p>
    <a name="ul1515617591337"></a><a name="ul1515617591337"></a><ul id="ul1515617591337"><li>前缀匹配：以*结尾代表以该路径为前缀。例如，需要防护的路径为<span class="parmvalue" id="parmvalue1111962015414"><a name="parmvalue1111962015414"></a><a name="parmvalue1111962015414"></a>“/admin/test.php”</span>或 <span class="parmvalue" id="parmvalue5307927143"><a name="parmvalue5307927143"></a><a name="parmvalue5307927143"></a>“/adminabc”</span>，则路径可以填写为<span class="parmvalue" id="parmvalue12617113514412"><a name="parmvalue12617113514412"></a><a name="parmvalue12617113514412"></a>“/admin*”</span>。</li><li>精准匹配：需要防护的路径需要与此处填写的路径完全相等。例如，需要防护的路径为<span class="parmvalue" id="parmvalue1032614581447"><a name="parmvalue1032614581447"></a><a name="parmvalue1032614581447"></a>“/admin”</span>，该规则必须填写为<span class="parmvalue" id="parmvalue71301461752"><a name="parmvalue71301461752"></a><a name="parmvalue71301461752"></a>“/admin”</span>。</li></ul>
    <div class="note" id="note15799173511525"><a name="note15799173511525"></a><a name="note15799173511525"></a><span class="notetitle"> 说明： </span><div class="notebody"><a name="ul20707155819344"></a><a name="ul20707155819344"></a><ul id="ul20707155819344"><li>该路径不支持正则，仅支持前缀匹配和精准匹配的逻辑。</li><li>路径里不能含有连续的多条斜线的配置，如<span class="parmvalue" id="parmvalue15660135573716"><a name="parmvalue15660135573716"></a><a name="parmvalue15660135573716"></a>“///admin”</span>，访问时，引擎会将<span class="parmvalue" id="parmvalue3913154823813"><a name="parmvalue3913154823813"></a><a name="parmvalue3913154823813"></a>“///”</span>转为<span class="parmvalue" id="parmvalue147935113816"><a name="parmvalue147935113816"></a><a name="parmvalue147935113816"></a>“/”</span>。</li></ul>
    </div></div>
    </td>
    <td class="cellrowborder" valign="top" width="31.95%" headers="mcps1.2.4.1.3 "><p id="p40544725181135"><a name="p40544725181135"></a><a name="p40544725181135"></a>/admin</p>
    <p id="p14223101141616"><a name="p14223101141616"></a><a name="p14223101141616"></a>例如：需要防护的URL为<span class="filepath" id="filepath1627493212383"><a name="filepath1627493212383"></a><a name="filepath1627493212383"></a>“http://www.example.com/admin”</span>，则<span class="parmname" id="parmname1696171533914"><a name="parmname1696171533914"></a><a name="parmname1696171533914"></a>“路径”</span>设置为<span class="parmvalue" id="parmvalue987542396"><a name="parmvalue987542396"></a><a name="parmvalue987542396"></a>“/admin”</span>。</p>
    </td>
    </tr>
    <tr id="row3251580618715"><td class="cellrowborder" valign="top" width="23.84%" headers="mcps1.2.4.1.1 "><p id="p1653459218715"><a name="p1653459218715"></a><a name="p1653459218715"></a>规则编号</p>
    </td>
    <td class="cellrowborder" valign="top" width="44.21%" headers="mcps1.2.4.1.2 "><p id="p167454859433"><a name="p167454859433"></a><a name="p167454859433"></a><span class="parmname" id="parmname11317164219301"><a name="parmname11317164219301"></a><a name="parmname11317164219301"></a>“防护事件”</span>列表中事件类型为非<span class="parmvalue" id="parmvalue493949259433"><a name="parmvalue493949259433"></a><a name="parmvalue493949259433"></a>“自定义规则”</span>的误报攻击事件所对应的规则编号。</p>
    <p id="p173433969435"><a name="p173433969435"></a><a name="p173433969435"></a>可单击该攻击事件所在行的<span class="uicontrol" id="uicontrol4655489094337"><a name="uicontrol4655489094337"></a><a name="uicontrol4655489094337"></a>“误报处理”</span>获取规则编号。</p>
    <p id="p6423359118715"><a name="p6423359118715"></a><a name="p6423359118715"></a>由6位数字组成，不能为空。</p>
    </td>
    <td class="cellrowborder" valign="top" width="31.95%" headers="mcps1.2.4.1.3 "><p id="p62897256181135"><a name="p62897256181135"></a><a name="p62897256181135"></a>000006</p>
    </td>
    </tr>
    </tbody>
    </table>

8.  单击“确认添加“，在页面右上角弹出“添加成功“，则表示添加误报屏蔽规则成功。

    若需要删除添加的误报屏蔽规则时，可单击待删除的误报屏蔽规则所在行的“删除“，删除误报屏蔽规则。


