# 配置误报屏蔽规则<a name="waf_01_0016"></a>

该章节指导您通过Web应用防火墙服务配置误报屏蔽规则。

对于误报情况，可以添加白名单对误报进行忽略，对某些规则ID或者事件类别进行忽略设置（例如，某URL不进行XSS的检查，可设置屏蔽规则，屏蔽XSS检查）。

## 前提条件<a name="section2256777914731"></a>

-   已获取管理控制台的账号和密码。
-   已添加防护域名。

## 操作步骤<a name="section6607803193933"></a>

1.  [登录管理控制台](https://console.huaweicloud.com/&locale=zh-cn)。
2.  进入防护配置入口，如[图1](#waf_01_0008_fig089771664710)所示。

    **图 1**  防护配置入口<a name="waf_01_0008_fig089771664710"></a>  
    ![](figures/防护配置入口.png "防护配置入口")

3.  在“误报屏蔽“配置框中，用户可根据自己的需要更改“状态“，单击“自定义误报屏蔽规则“，进入“误报屏蔽“规则配置页面，如[图2](#fig44151977327)所示。

    **图 2**  误报屏蔽配置框<a name="fig44151977327"></a>  
    ![](figures/误报屏蔽配置框.png "误报屏蔽配置框")

4.  在“误报屏蔽“规则配置页面左上角，单击“添加规则“。
5.  添加误报屏蔽规则，如[图3](#fig14415389105236)所示，参数说明如[表1](#table4696626918715)所示。

    **图 3**  添加误报屏蔽规则<a name="fig14415389105236"></a>  
    ![](figures/添加误报屏蔽规则.png "添加误报屏蔽规则")

    **表 1**  添加误报屏蔽规则参数说明

    <a name="table4696626918715"></a>
    <table><thead align="left"><tr id="row151760118715"><th class="cellrowborder" valign="top" width="23.84%" id="mcps1.2.4.1.1"><p id="p3258956818715"><a name="p3258956818715"></a><a name="p3258956818715"></a>参数</p>
    </th>
    <th class="cellrowborder" valign="top" width="44.12%" id="mcps1.2.4.1.2"><p id="p2250934518715"><a name="p2250934518715"></a><a name="p2250934518715"></a>参数说明</p>
    </th>
    <th class="cellrowborder" valign="top" width="32.04%" id="mcps1.2.4.1.3"><p id="p2986065181135"><a name="p2986065181135"></a><a name="p2986065181135"></a>取值样例</p>
    </th>
    </tr>
    </thead>
    <tbody><tr id="row125751318715"><td class="cellrowborder" valign="top" width="23.84%" headers="mcps1.2.4.1.1 "><p id="p3474973518715"><a name="p3474973518715"></a><a name="p3474973518715"></a>路径</p>
    </td>
    <td class="cellrowborder" valign="top" width="44.12%" headers="mcps1.2.4.1.2 "><p id="p6326519018715"><a name="p6326519018715"></a><a name="p6326519018715"></a>误报路径，完整的URL链接，不包含域名。</p>
    <a name="ul1515617591337"></a><a name="ul1515617591337"></a><ul id="ul1515617591337"><li>前缀匹配：以*结尾代表以该路径为前缀。例如，需要防护的路径为<span class="parmvalue" id="parmvalue1111962015414"><a name="parmvalue1111962015414"></a><a name="parmvalue1111962015414"></a>“/admin/test.php”</span>或 <span class="parmvalue" id="parmvalue5307927143"><a name="parmvalue5307927143"></a><a name="parmvalue5307927143"></a>“/adminabc”</span>，则路径可以填写为<span class="parmvalue" id="parmvalue12617113514412"><a name="parmvalue12617113514412"></a><a name="parmvalue12617113514412"></a>“/admin*”</span>。</li><li>精准匹配：需要防护的路径需要与此处填写的路径完全相等。例如，需要防护的路径为<span class="parmvalue" id="parmvalue1032614581447"><a name="parmvalue1032614581447"></a><a name="parmvalue1032614581447"></a>“/admin”</span>，该规则必须填写为<span class="parmvalue" id="parmvalue71301461752"><a name="parmvalue71301461752"></a><a name="parmvalue71301461752"></a>“/admin”</span>。</li></ul>
    <div class="note" id="note15799173511525"><a name="note15799173511525"></a><a name="note15799173511525"></a><span class="notetitle"> 说明： </span><div class="notebody"><a name="ul20707155819344"></a><a name="ul20707155819344"></a><ul id="ul20707155819344"><li>该路径不支持正则，仅支持前缀匹配和精准匹配的逻辑。</li><li>路径里不能含有连续的多条斜线的配置，如<span class="parmvalue" id="parmvalue15660135573716"><a name="parmvalue15660135573716"></a><a name="parmvalue15660135573716"></a>“///admin”</span>，访问时，引擎会将<span class="parmvalue" id="parmvalue3913154823813"><a name="parmvalue3913154823813"></a><a name="parmvalue3913154823813"></a>“///”</span>转为<span class="parmvalue" id="parmvalue147935113816"><a name="parmvalue147935113816"></a><a name="parmvalue147935113816"></a>“/”</span>。</li></ul>
    </div></div>
    </td>
    <td class="cellrowborder" valign="top" width="32.04%" headers="mcps1.2.4.1.3 "><p id="p40544725181135"><a name="p40544725181135"></a><a name="p40544725181135"></a>/admin*</p>
    <p id="p749261073816"><a name="p749261073816"></a><a name="p749261073816"></a>针对特定的攻击事件类型，可参照下面三种情形进行配置：</p>
    <a name="ul294417207388"></a><a name="ul294417207388"></a><ul id="ul294417207388"><li>如果您需要配置目标域名下所有的页面都放行，即针对特定攻击类型都不拦截，则<span class="parmname" id="parmname1788219496384"><a name="parmname1788219496384"></a><a name="parmname1788219496384"></a>“路径”</span>设置为<span class="parmvalue" id="parmvalue192905815388"><a name="parmvalue192905815388"></a><a name="parmvalue192905815388"></a>“/*”</span>。</li><li>如果您需要配置目标域名下包含特定信息的页面不拦截，例如，包含<span class="parmvalue" id="parmvalue9301415153910"><a name="parmvalue9301415153910"></a><a name="parmvalue9301415153910"></a>“admin”</span>的页面不拦截，则<span class="parmname" id="parmname683482612395"><a name="parmname683482612395"></a><a name="parmname683482612395"></a>“路径”</span>设置为<span class="parmvalue" id="parmvalue88547366397"><a name="parmvalue88547366397"></a><a name="parmvalue88547366397"></a>“/admin*”</span>。</li><li>如果您需要配置目标域名下只针对特定路径的页面不拦截，例如，域名下的<span class="parmvalue" id="parmvalue107842555394"><a name="parmvalue107842555394"></a><a name="parmvalue107842555394"></a>“/amin”</span>页面不拦截，则<span class="parmname" id="parmname2423362403"><a name="parmname2423362403"></a><a name="parmname2423362403"></a>“路径”</span>设置为<span class="parmvalue" id="parmvalue1242317611407"><a name="parmvalue1242317611407"></a><a name="parmvalue1242317611407"></a>“/admin”</span>。</li></ul>
    </td>
    </tr>
    <tr id="row3251580618715"><td class="cellrowborder" valign="top" width="23.84%" headers="mcps1.2.4.1.1 "><p id="p1653459218715"><a name="p1653459218715"></a><a name="p1653459218715"></a>规则编号</p>
    </td>
    <td class="cellrowborder" valign="top" width="44.12%" headers="mcps1.2.4.1.2 "><p id="p167454859433"><a name="p167454859433"></a><a name="p167454859433"></a><span class="parmname" id="parmname11317164219301"><a name="parmname11317164219301"></a><a name="parmname11317164219301"></a>“防护事件”</span>列表中事件类型为非<span class="parmvalue" id="parmvalue493949259433"><a name="parmvalue493949259433"></a><a name="parmvalue493949259433"></a>“自定义规则”</span>的攻击事件所对应的规则编号。</p>
    <p id="p173433969435"><a name="p173433969435"></a><a name="p173433969435"></a>可单击该攻击事件所在行的<span class="uicontrol" id="uicontrol4655489094337"><a name="uicontrol4655489094337"></a><a name="uicontrol4655489094337"></a>“误报处理”</span>获取规则编号。</p>
    <p id="p6423359118715"><a name="p6423359118715"></a><a name="p6423359118715"></a>由6位数字组成，不能为空。</p>
    </td>
    <td class="cellrowborder" valign="top" width="32.04%" headers="mcps1.2.4.1.3 "><p id="p62897256181135"><a name="p62897256181135"></a><a name="p62897256181135"></a>000006</p>
    </td>
    </tr>
    <tr id="row11241112714318"><td class="cellrowborder" valign="top" width="23.84%" headers="mcps1.2.4.1.1 "><p id="p1524172711310"><a name="p1524172711310"></a><a name="p1524172711310"></a>规则描述</p>
    </td>
    <td class="cellrowborder" valign="top" width="44.12%" headers="mcps1.2.4.1.2 "><p id="p82416271336"><a name="p82416271336"></a><a name="p82416271336"></a>可选参数，设置该规则的备注信息。</p>
    </td>
    <td class="cellrowborder" valign="top" width="32.04%" headers="mcps1.2.4.1.3 "><p id="p92411727139"><a name="p92411727139"></a><a name="p92411727139"></a>--</p>
    </td>
    </tr>
    </tbody>
    </table>

6.  单击“确认添加“，添加的误报屏蔽规则展示在误报屏蔽规则列表中。

    **图 4**  误报屏蔽规则列表<a name="fig1992112352318"></a>  
    ![](figures/误报屏蔽规则列表.png "误报屏蔽规则列表")

    -   规则添加成功后，默认的“规则状态“为“已开启“，若您暂时不想使该规则生效，可在目标规则所在行的“操作“列，单击“关闭“。
    -   若需要删除添加的误报屏蔽规则时，可单击待删除的误报屏蔽规则所在行的“删除“，删除误报屏蔽规则。


