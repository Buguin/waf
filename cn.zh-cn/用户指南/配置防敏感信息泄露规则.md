# 配置防敏感信息泄露规则<a name="waf_01_0054"></a>

该任务指导用户通过Web应用防火墙配置防敏感信息泄露规则。

该规则可添加两种类型的防敏感信息泄露规则：

-   敏感信息过滤，配置后可对返回业面中包含的敏感信息做屏蔽处理，防止用户的敏感信息（例如：身份证号、电话号码、电子邮箱等）泄露，
-   响应码拦截，配置后可拦截指定的HTTP响应码页面。

## 前提条件<a name="section652119555377"></a>

-   已获取管理控制台的帐号和密码。
-   已添加防护域名。

## 操作步骤<a name="section27954597372"></a>

1.  登录管理控制台（https://console.huaweicloud.com/）。
2.  单击管理控制台左上角的![](figures/选择区域图标.jpg)，选择区域或项目。
3.  单击页面上方的“服务列表“，选择“安全  \>  Web应用防火墙“，在左侧导航树中选择“域名配置“，进入“域名配置“页面，如[图1](#waf_01_0008_fig164792010154510)所示。

    **图 1**  域名配置页面<a name="waf_01_0008_fig164792010154510"></a>  
    ![](figures/域名配置页面-10.png "域名配置页面-10")

4.  在目标域名所在行的“防护策略“栏中，单击“配置防护策略“，进入“防护配置“页面。
5.  在“防敏感信息泄露“的配置框中，用户可根据自己的需要更改“状态“，单击“自定义防敏感信息泄露规则“，进入“防敏感信息泄露“规则配置页面，如[图2](#fig1257034345115)所示。

    **图 2**  防敏感信息泄露配置框<a name="fig1257034345115"></a>  
    ![](figures/防敏感信息泄露配置框.png "防敏感信息泄露配置框")

6.  在“防敏感信息泄露“规则配置页面左上角，单击“添加规则“。
7.  在弹出的对话框，添加防敏感信息泄露规则。

    “防敏感信息泄露“规则既能防止用户的敏感信息（例如：身份证号、电话号码、电子邮箱等）泄露，也能够拦截指定的HTTP响应码页面，参数说明如[表1](#table1156133013104)所示。

    **表 1**  参数说明

    <a name="table1156133013104"></a>
    <table><thead align="left"><tr id="row856530161017"><th class="cellrowborder" valign="top" width="22%" id="mcps1.2.4.1.1"><p id="p956123071015"><a name="p956123071015"></a><a name="p956123071015"></a>参数名称</p>
    </th>
    <th class="cellrowborder" valign="top" width="53%" id="mcps1.2.4.1.2"><p id="p175793061016"><a name="p175793061016"></a><a name="p175793061016"></a>参数说明</p>
    </th>
    <th class="cellrowborder" valign="top" width="25%" id="mcps1.2.4.1.3"><p id="p165713031018"><a name="p165713031018"></a><a name="p165713031018"></a>取值样例</p>
    </th>
    </tr>
    </thead>
    <tbody><tr id="row9571630101014"><td class="cellrowborder" valign="top" width="22%" headers="mcps1.2.4.1.1 "><p id="p35773010108"><a name="p35773010108"></a><a name="p35773010108"></a>路径</p>
    </td>
    <td class="cellrowborder" valign="top" width="53%" headers="mcps1.2.4.1.2 "><p id="p1080314361368"><a name="p1080314361368"></a><a name="p1080314361368"></a>需要过滤敏感信息（例如：身份证号、电话号码、电子邮箱等）或者拦截响应码的URL不包含域名的路径。</p>
    <a name="ul20810143683616"></a><a name="ul20810143683616"></a><ul id="ul20810143683616"><li>前缀匹配：填写的路径前缀与需要防护的路径相同即可。<p id="p1682623653615"><a name="p1682623653615"></a><a name="p1682623653615"></a>如果防护路径为<span class="parmvalue" id="parmvalue178335366361"><a name="parmvalue178335366361"></a><a name="parmvalue178335366361"></a>“/admin”</span>，该规则填写为<span class="parmvalue" id="parmvalue1283710367365"><a name="parmvalue1283710367365"></a><a name="parmvalue1283710367365"></a>“/admin*”</span>，该规则生效。</p>
    </li><li>精准匹配：需要防护的路径需要与此处填写的路径完全相等。<p id="p1285333620361"><a name="p1285333620361"></a><a name="p1285333620361"></a>如果防护路径为<span class="parmvalue" id="parmvalue88609362364"><a name="parmvalue88609362364"></a><a name="parmvalue88609362364"></a>“/admin”</span>，该规则必须填写为<span class="parmvalue" id="parmvalue1586415365362"><a name="parmvalue1586415365362"></a><a name="parmvalue1586415365362"></a>“/admin”</span>。</p>
    <div class="note" id="note1124594519548"><a name="note1124594519548"></a><a name="note1124594519548"></a><span class="notetitle"> 说明： </span><div class="notebody"><a name="ul20707155819344"></a><a name="ul20707155819344"></a><ul id="ul20707155819344"><li>该路径不支持正则，仅支持前缀匹配和精准匹配的逻辑。</li><li>路径里不能含有多条斜线的配置，如<span class="parmvalue" id="parmvalue15660135573716"><a name="parmvalue15660135573716"></a><a name="parmvalue15660135573716"></a>“///admin”</span>，访问时，引擎会将<span class="parmvalue" id="parmvalue3913154823813"><a name="parmvalue3913154823813"></a><a name="parmvalue3913154823813"></a>“///”</span>转为<span class="parmvalue" id="parmvalue147935113816"><a name="parmvalue147935113816"></a><a name="parmvalue147935113816"></a>“/”</span>。</li></ul>
    </div></div>
    </li></ul>
    </td>
    <td class="cellrowborder" valign="top" width="25%" headers="mcps1.2.4.1.3 "><p id="p4571630201011"><a name="p4571630201011"></a><a name="p4571630201011"></a>/admin*</p>
    </td>
    </tr>
    <tr id="row157103021019"><td class="cellrowborder" valign="top" width="22%" headers="mcps1.2.4.1.1 "><p id="p1157630191019"><a name="p1157630191019"></a><a name="p1157630191019"></a>类型</p>
    </td>
    <td class="cellrowborder" valign="top" width="53%" headers="mcps1.2.4.1.2 "><a name="ul26881320101620"></a><a name="ul26881320101620"></a><ul id="ul26881320101620"><li>敏感信息过滤：防止用户的敏感信息（例如：身份证号、电话号码、电子邮箱等）泄露。</li><li>响应码拦截：拦截指定的HTTP响应码页面。</li></ul>
    </td>
    <td class="cellrowborder" valign="top" width="25%" headers="mcps1.2.4.1.3 "><p id="p2572030191017"><a name="p2572030191017"></a><a name="p2572030191017"></a>敏感信息过滤</p>
    </td>
    </tr>
    <tr id="row657212281518"><td class="cellrowborder" valign="top" width="22%" headers="mcps1.2.4.1.1 "><p id="p1857319225155"><a name="p1857319225155"></a><a name="p1857319225155"></a>内容</p>
    </td>
    <td class="cellrowborder" valign="top" width="53%" headers="mcps1.2.4.1.2 "><p id="p10573822111515"><a name="p10573822111515"></a><a name="p10573822111515"></a>防护<span class="parmname" id="parmname115685152019"><a name="parmname115685152019"></a><a name="parmname115685152019"></a>“类型”</span>对应的防护内容，支持多选。</p>
    </td>
    <td class="cellrowborder" valign="top" width="25%" headers="mcps1.2.4.1.3 "><p id="p105731022101513"><a name="p105731022101513"></a><a name="p105731022101513"></a>身份证号码</p>
    </td>
    </tr>
    </tbody>
    </table>


1.  单击“确定“，在页面右上角弹出“添加成功“，则表示添加防敏感信息泄露规则成功。
    -   当您需要修改添加的防敏感信息泄露规则时，在待修改的防敏感信息泄露规则所在行，单击“修改“，修改防敏感信息泄露规则。
    -   当您需要删除添加的防敏感信息泄露规则时，在待删除的防敏感信息泄露规则所在行，单击“删除“，删除防敏感信息泄露规则。


